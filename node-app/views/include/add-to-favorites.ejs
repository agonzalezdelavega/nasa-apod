<% if (locals.image) { %>
    <% if (!isLoggedIn) { %>
        <span class="material-symbols-outlined star" title="Sign in to add images to your favorites!">star</span>
    <% } else { %>
        <form action="/images?imageDate=<%= imageDate %>" method="post">
            <input type="hidden" name="imageDate" value="<%= imageDate %>">
            <input type="hidden" name="imageTitle" value="<%= imageTitle %>">
            <input type="hidden" name="image" value="<%= image %>">
            <input type="hidden" name="mediaType" value="<%= mediaType %>">
            <button class="btn-favorites" type="submit">
                <span class="material-symbols-outlined star" title="Add to favorites">star</span>
                <script>
                    var isFavorite = "<%= isFavorite %>";
                    const star = document.querySelector(".star");
                    if (isFavorite === "true") {
                        star.classList.add("favorite")
                    };

                    function toggleFavorites(e) {
                        isFavorite = !isFavorite;
                        e.target.classList.toggle("favorite");
                    };

                    star.addEventListener("click", toggleFavorites);
                </script>
            </button>
        </form>
    <% } %>
<% } %>